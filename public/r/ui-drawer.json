{
	"$schema": "https://ui.shadcn.com/schema/registry-item.json",
	"name": "ui-drawer",
	"type": "registry:ui",
	"description": "A drawer/slide-out panel component",
	"dependencies": ["motion", "lucide-react"],
	"registryDependencies": ["@craftui/lib-utils"],
	"files": [
		{
			"path": "src/registry/ui/drawer/index.tsx",
			"content": "\"use client\";\n\nimport React from \"react\";\nimport { X } from \"lucide-react\";\nimport { createPortal } from \"react-dom\";\nimport { AnimatePresence, motion } from \"motion/react\";\nimport type { Transition, Variants } from \"motion/react\";\n\nimport { cn } from \"@/lib/utils\";\n\ntype DrawerOrigin = \"left\" | \"right\" | \"top\" | \"bottom\";\n\n// Drawer context\nconst DrawerContext = React.createContext<{\n\tisOpen: boolean;\n\tsetIsOpen: (isOpen: boolean) => void;\n\torigin: DrawerOrigin;\n\tvariants: Variants;\n\ttransition: Transition;\n} | null>(null);\n\n// useDrawer hook\nconst useDrawer = () => {\n\tconst context = React.useContext(DrawerContext);\n\tif (!context) {\n\t\tthrow new Error(\"Drawer components must be used within a Drawer\");\n\t}\n\treturn context;\n};\n\n// Drawer component\ninterface DrawerProps {\n\tchildren: React.ReactNode;\n\torigin?: DrawerOrigin;\n\tvariants?: Variants;\n\ttransition?: Transition;\n\tdefaultOpen?: boolean;\n\topen?: boolean;\n\tonOpenChange?: (isOpen: boolean) => void;\n}\n\nconst defaultVariants: Record<DrawerOrigin, Variants> = {\n\tleft: {\n\t\tinitial: { x: \"-100%\" },\n\t\tanimate: { x: 0 },\n\t\texit: { x: \"-100%\" },\n\t},\n\tright: {\n\t\tinitial: { x: \"100%\" },\n\t\tanimate: { x: 0 },\n\t\texit: { x: \"100%\" },\n\t},\n\ttop: {\n\t\tinitial: { y: \"-100%\" },\n\t\tanimate: { y: 0 },\n\t\texit: { y: \"-100%\" },\n\t},\n\tbottom: {\n\t\tinitial: { y: \"100%\" },\n\t\tanimate: { y: 0 },\n\t\texit: { y: \"100%\" },\n\t},\n};\n\nconst defaultTransition: Transition = {\n\ttype: \"spring\",\n\tstiffness: 300,\n\tdamping: 30,\n};\n\nconst Drawer: React.FC<DrawerProps> = ({\n\tchildren,\n\torigin = \"right\",\n\tvariants = defaultVariants[origin],\n\ttransition = defaultTransition,\n\tdefaultOpen = false,\n\tonOpenChange,\n\topen,\n}) => {\n\tconst isControlled = open !== undefined;\n\tconst [uncontrolledOpen, setUncontrolledOpen] = React.useState(defaultOpen);\n\tconst isOpen = isControlled ? open : uncontrolledOpen;\n\n\tconst setIsOpen = React.useCallback(\n\t\t(newOpen: boolean) => {\n\t\t\tif (!isControlled) {\n\t\t\t\tsetUncontrolledOpen(newOpen);\n\t\t\t}\n\t\t\tonOpenChange?.(newOpen);\n\t\t},\n\t\t[isControlled, onOpenChange],\n\t);\n\n\tReact.useEffect(() => {\n\t\tonOpenChange?.(isOpen);\n\t}, [isOpen, onOpenChange]);\n\n\treturn (\n\t\t<DrawerContext.Provider\n\t\t\tvalue={{ isOpen, setIsOpen, origin, variants, transition }}\n\t\t>\n\t\t\t{children}\n\t\t</DrawerContext.Provider>\n\t);\n};\n\n// DrawerTrigger component\ninterface DrawerTriggerProps {\n\tchildren: React.ReactNode;\n\tasChild?: boolean;\n\tclassName?: string;\n}\n\nconst DrawerTrigger: React.FC<DrawerTriggerProps> = ({\n\tchildren,\n\tasChild = false,\n\tclassName,\n}) => {\n\tconst { setIsOpen } = useDrawer();\n\n\tconst handleClick = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\tsetIsOpen(true);\n\t};\n\n\tif (asChild && React.isValidElement(children)) {\n\t\treturn React.cloneElement(children as React.ReactElement<any>, {\n\t\t\tonClick: (e: React.MouseEvent) => {\n\t\t\t\t(children as React.ReactElement<any>).props.onClick?.(e);\n\t\t\t\thandleClick(e);\n\t\t\t},\n\t\t});\n\t}\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tonClick={handleClick}\n\t\t\tclassName={cn(\n\t\t\t\t\"px-4 py-2 text-sm font-medium rounded-md border transition-colors focus:outline-none\",\n\t\t\t\t\"bg-white text-black border-gray-200 hover:bg-gray-200 focus:ring-2 focus:ring-gray-300\",\n\t\t\t\t\"dark:bg-zinc-800 dark:text-white dark:border-zinc-700 dark:hover:bg-gray-800 dark:focus:ring-gray-600\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{children}\n\t\t</button>\n\t);\n};\n\n// DrawerContent component\ninterface DrawerContentProps {\n\tchildren: React.ReactNode;\n\tonClose?: () => void;\n\tclassName?: string;\n\tbackdropClassName?: string;\n}\n\nconst DrawerContent: React.FC<DrawerContentProps> = ({\n\tchildren,\n\tonClose,\n\tclassName,\n\tbackdropClassName,\n}) => {\n\tconst { isOpen, setIsOpen, origin, variants, transition } = useDrawer();\n\n\tconst drawerRef = React.useRef<HTMLDivElement>(null);\n\tconst contentRef = React.useRef<HTMLDivElement>(null);\n\n\tReact.useEffect(() => {\n\t\tconst handleEscape = (event: KeyboardEvent) => {\n\t\t\tif (event.key === \"Escape\") {\n\t\t\t\tsetIsOpen(false);\n\t\t\t\tonClose?.();\n\t\t\t}\n\t\t};\n\n\t\tif (isOpen) {\n\t\t\tdocument.addEventListener(\"keydown\", handleEscape);\n\t\t\treturn () => document.removeEventListener(\"keydown\", handleEscape);\n\t\t}\n\t}, [isOpen, setIsOpen, onClose]);\n\n\tReact.useEffect(() => {\n\t\tif (isOpen && contentRef.current) {\n\t\t\tconst focusableElements = Array.from(\n\t\t\t\tcontentRef.current.querySelectorAll(\n\t\t\t\t\t'button, [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])',\n\t\t\t\t),\n\t\t\t) as HTMLElement[];\n\n\t\t\tif (focusableElements.length > 0) {\n\t\t\t\tconst firstElement = focusableElements[0];\n\t\t\t\tconst lastElement =\n\t\t\t\t\tfocusableElements[focusableElements.length - 1];\n\n\t\t\t\tconst handleTabKey = (event: KeyboardEvent) => {\n\t\t\t\t\tif (event.key === \"Tab\") {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tevent.shiftKey &&\n\t\t\t\t\t\t\tdocument.activeElement === firstElement\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tlastElement.focus();\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t!event.shiftKey &&\n\t\t\t\t\t\t\tdocument.activeElement === lastElement\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tfirstElement.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tfirstElement.focus();\n\n\t\t\t\tdocument.addEventListener(\"keydown\", handleTabKey);\n\t\t\t\treturn () =>\n\t\t\t\t\tdocument.removeEventListener(\"keydown\", handleTabKey);\n\t\t\t}\n\t\t}\n\t}, [isOpen]);\n\n\tconst portalContent = (\n\t\t<AnimatePresence>\n\t\t\t{isOpen && (\n\t\t\t\t<motion.div\n\t\t\t\t\tref={drawerRef}\n\t\t\t\t\tinitial={{ opacity: 0 }}\n\t\t\t\t\tanimate={{ opacity: 1 }}\n\t\t\t\t\texit={{ opacity: 0 }}\n\t\t\t\t\ttransition={{ duration: 0.2 }}\n\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm\",\n\t\t\t\t\t\tbackdropClassName,\n\t\t\t\t\t\t\"dark:bg-black/70\",\n\t\t\t\t\t)}\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\tif (e.target === drawerRef.current) {\n\t\t\t\t\t\t\tsetIsOpen(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tref={contentRef}\n\t\t\t\t\t\tinitial=\"initial\"\n\t\t\t\t\t\tanimate=\"animate\"\n\t\t\t\t\t\texit=\"exit\"\n\t\t\t\t\t\ttransition={transition}\n\t\t\t\t\t\tvariants={variants}\n\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\"px-4 fixed bg-white shadow-md border\",\n\t\t\t\t\t\t\t\"dark:bg-zinc-900 dark:text-white dark:border-zinc-800\",\n\t\t\t\t\t\t\torigin === \"left\" || origin === \"right\"\n\t\t\t\t\t\t\t\t? \"top-0 bottom-0 w-full md:w-1/4\"\n\t\t\t\t\t\t\t\t: \"left-0 right-0 h-80\",\n\t\t\t\t\t\t\torigin === \"left\"\n\t\t\t\t\t\t\t\t? \"left-0\"\n\t\t\t\t\t\t\t\t: origin === \"right\"\n\t\t\t\t\t\t\t\t\t? \"right-0\"\n\t\t\t\t\t\t\t\t\t: origin === \"top\"\n\t\t\t\t\t\t\t\t\t\t? \"top-0\"\n\t\t\t\t\t\t\t\t\t\t: \"bottom-0\",\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</motion.div>\n\t\t\t\t</motion.div>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n\n\treturn typeof window !== \"undefined\"\n\t\t? createPortal(portalContent, document.body)\n\t\t: null;\n};\n\n// DrawerHeader component\nconst DrawerHeader: React.FC<{\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}> = ({ children, className }) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t\"py-4 border-b border-gray-200 dark:border-zinc-700\",\n\t\t\tclassName,\n\t\t)}\n\t>\n\t\t{children}\n\t</div>\n);\n\n// DrawerTitle component\nconst DrawerTitle: React.FC<{\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}> = ({ children, className }) => (\n\t<h2 className={cn(\"text-xl font-semibold dark:text-white\", className)}>\n\t\t{children}\n\t</h2>\n);\n\n// DrawerDescription component\nconst DrawerDescription: React.FC<{\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}> = ({ children, className }) => (\n\t<p className={cn(\"text-sm text-gray-400 dark:text-gray-500\", className)}>\n\t\t{children}\n\t</p>\n);\n\n// DrawerClose component\ninterface DrawerCloseProps {\n\tchildren?: React.ReactNode;\n\tasChild?: boolean;\n\tclassName?: string;\n}\n\n// DrawerClose component\nconst DrawerClose: React.FC<DrawerCloseProps> = ({\n\tchildren,\n\tasChild = false,\n\tclassName,\n}) => {\n\tconst { setIsOpen } = useDrawer();\n\n\tconst handleClose = (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\tsetIsOpen(false);\n\t};\n\n\tif (asChild && React.isValidElement(children)) {\n\t\treturn React.cloneElement(children as React.ReactElement<any>, {\n\t\t\tonClick: (e: React.MouseEvent) => {\n\t\t\t\t(children as React.ReactElement<any>).props.onClick?.(e);\n\t\t\t\thandleClose(e);\n\t\t\t},\n\t\t});\n\t}\n\n\treturn (\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tonClick={handleClose}\n\t\t\taria-label=\"Close drawer\"\n\t\t\tclassName={cn(\n\t\t\t\t\"text-sm border border-gray-200 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100\",\n\t\t\t\t\"dark:text-gray-300 dark:border-zinc-700 dark:hover:text-white dark:hover:bg-gray-800 dark:focus:ring-zinc-800\",\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t>\n\t\t\t{children || <X className=\"h-4 w-4\" />}\n\t\t</button>\n\t);\n};\n\n// DrawerFooter component\nconst DrawerFooter: React.FC<{\n\tchildren: React.ReactNode;\n\tclassName?: string;\n}> = ({ children, className }) => (\n\t<div\n\t\tclassName={cn(\n\t\t\t\"py-4 border-t border-gray-200 dark:border-zinc-700\",\n\t\t\tclassName,\n\t\t)}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport {\n\tDrawer,\n\tDrawerTrigger,\n\tDrawerContent,\n\tDrawerHeader,\n\tDrawerTitle,\n\tDrawerDescription,\n\tDrawerClose,\n\tDrawerFooter,\n};\n",
			"type": "registry:ui",
			"target": "components/craftui/ui/drawer.tsx"
		}
	]
}
